# 訂單詳細資訊 API 說明

此 API 用於取得單一工單的完整詳細資訊，包含訂單摘要、特殊備註、規格版本及詳細規格清單。

## 基本資訊

*   **URL**: `/api/order/<order_id>`
*   **Method**: `GET`
*   **Auth**: 無 (內部網路)

## 請求參數

### 路徑參數 (Path Parameters)

| 參數名稱 | 類型 | 必填 | 說明 | 範例值 |
| :--- | :--- | :--- | :--- | :--- |
| `order_id` | `string` | 是 | 工單號碼 (通常為 9 碼數字) | `100003446` |

## 回傳格式 (JSON)

API 回傳一個 JSON 物件，包含以下主要區塊：

1.  **order_summary**: 訂單摘要 (基本屬性)
2.  **order_note**: 訂單備註 (特殊注意事項)
3.  **spec_version**: 規格版本號
4.  **order_specs**: 詳細規格清單 (陣列)

### 回傳範例

```json
{
  "order_id": "100003446",
  
  // 1. 訂單備註 (Order Remarks)
  // 來自 "訂單備註.xlsx"，包含業務或生管對此訂單的特殊指示
  "order_note": "請注意：此訂單需附上材質證明書，且包裝需加強防護。",

  // 2. 規格版本 (Specification Version)
  // 該訂單規格的版本號碼
  "spec_version": "V1.2",

  // 3. 訂單摘要 (Order Summary)
  // 來自 "工單總表"，包含訂單的基本屬性與生產資訊
  "order_summary": {
    "工單號碼": "100003446",
    "訂單號碼": "SO-20231201-001",
    "下單客戶名稱": "客戶 A",
    "物料品號": "MAT-001",
    "物料說明": "精密加工機型-X1",
    "生產開始": "2023-12-01",     // 預計或實際生產開始日
    "生產結束": "2023-12-10",     // 預計或實際生產結束日
    "機械外包": "裝三課",        // 用於判斷廠別
    "廠別": "三廠"               // 系統自動判斷的廠別 (一廠/三廠)
  },

  // 4. 詳細規格 (Order Specifications)
  // 來自訂單專屬的規格 Excel 檔，列出所有客製化規格特性
  "order_specs": [
    {
      "內部特性號碼": "C001",
      "特性說明": "主軸馬達電壓",
      "特性值": "220V",
      "值說明": "伏特"
    },
    {
      "內部特性號碼": "C002",
      "特性說明": "電源頻率",
      "特性值": "60Hz",
      "值說明": "赫茲"
    },
    {
      "內部特性號碼": "M005",
      "特性說明": "控制器型號",
      "特性值": "FANUC_0IMF",
      "值說明": "Fanuc 0i-MF Plus"
    }
  ],

  // 5. 訂單物料 (Order Materials)
  // 該訂單的 BOM 物料清單 (視系統設定，可能為空陣列)
  "order_materials": []
}
```

## 欄位詳細說明

| 欄位 (Key) | 類型 | 說明 |
| :--- | :--- | :--- |
| `order_note` | `string` | **重要**。訂單的特殊備註文字。若無備註則為 `null` 或空字串。 |
| `spec_version` | `string` | 規格文件的版本號。 |
| `order_summary` | `object` | 訂單的基本屬性集合。內容動態產生，主要包含客戶、訂單號、品號、生產日期等。 |
| `order_specs` | `array` | 規格陣列。每個元素代表一個規格特性 (`Attribute`)。 |
| `order_specs[].特性說明` | `string` | 規格名稱 (例如：電壓、顏色、控制器)。 |
| `order_specs[].特性值` | `string` | 規格的代碼或數值。 |
| `order_specs[].值說明` | `string` | 規格值的詳細文字描述。 |

## 錯誤代碼

*   **200 OK**: 成功取得資料。
*   **404 Not Found**: 找不到指定的工單號碼(雖然此API目前多回傳500或空資料，但建議預留)。
*   **500 Internal Server Error**: 伺服器內部錯誤或資料尚未載入。
